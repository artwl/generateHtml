// [nucleo]  Build version: 1.2.14 - Friday, August 21st, 2020, 9:46:22 PM  
!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e){e.exports=JSON.parse('{"name":"@ironsrc/nucleo","description":"Game manager for Playable ads","version":"1.2.14","keywords":[],"author":"ironSource","license":"ISC","main":"./dist/@ironsrc/nucleo.js","types":"./typings/nucleo.d.ts","scripts":{"test":"jest","start":"webpack --mode development --watch","build":"jest && npm run build:dev && npm run build:min","build:dev":"webpack --mode development","build:min":"webpack --mode production","tag":"git tag v$npm_package_version","version:patch":"npm --no-git-tag-version version patch","version:minor":"npm --no-git-tag-version version minor","version:major":"npm --no-git-tag-version version major","version:prerelease":"npm --no-git-tag-version version prerelease","preversion":"npm test","postversion":"./scripts/post-version.sh","lint":"tslint --project . --force","upload":"./scripts/upload.sh","readme":"node ./scripts/update-readme.js","clean":"rm -fr node_modules && rm package-lock.json"},"husky":{"hooks":{"pre-push":"npm run lint"}},"dependencies":{"deepmerge":"^4.0.0"},"repository":{"type":"git","url":"https://github.com/SupersonicAds/playworks-nucleo.git"},"files":["/dist/@ironsrc/*min.js","/@types"],"publishConfig":{"registry":"https://ironsrc.jfrog.io/ironsrc/api/npm/npmjs-local"},"devDependencies":{"@types/jest":"^26.0.8","husky":"^2.4.1","jest":"^26.2.2","ts-jest":"^26.1.4","ts-loader":"^8.0.2","tslint":"^5.16.0","tslint-config-airbnb":"^5.11.1","tslint-consistent-codestyle":"^1.15.1","tslint-defocus":"^2.0.6","tslint-eslint-rules":"^5.4.0","tslint-origin-ordered-imports-rule":"^1.2.2","typescript":"^3.9.7","uglifyjs-webpack-plugin":"^2.1.3","webpack":"^4.33.0","webpack-auto-inject-version":"^1.2.2","webpack-cli":"^3.3.2"}}')},function(e,t,n){"use strict";var o=function(e){return!(!(o=e)||"object"!=typeof o||(t=e,"[object RegExp]"===(n=Object.prototype.toString.call(t))||"[object Date]"===n||function(e){return e.$$typeof===i}(t)));var t,n,o},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function a(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function s(e){return Object.keys(e).concat((t=e,Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]));var t}function u(e,t){try{return t in e}catch(e){return!1}}function d(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||a,n.isMergeableObject=n.isMergeableObject||o,n.cloneUnlessOtherwiseSpecified=r;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):function(e,t,n){var o={};return n.isMergeableObject(e)&&s(e).forEach((function(t){o[t]=r(e[t],n)})),s(t).forEach((function(i){var a,s;(!u(a=e,s=i)||Object.hasOwnProperty.call(a,s)&&Object.propertyIsEnumerable.call(a,s))&&(u(e,i)&&n.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return d;var n=t.customMerge(e);return"function"==typeof n?n:d}(i,n)(e[i],t[i],n):o[i]=r(t[i],n))})),o}(e,t,n):r(t,n)}d.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return d(e,n,t)}),{})},e.exports=d},function(e,t,n){!function(t){"use strict";function n(e){e=e||{};var t="atom-js";this.options={endpoint:e.endpoint||"https://track.atom-data.io/",apiVersion:"V1",auth:e.auth||"",sdkVersion:e.sdkVersion?"1.5.1+"+e.sdkVersion:"1.5.1",sdkType:e.sdkType?t+"+"+e.sdkType:t}}function o(e){if(this.params=e||{},"string"!=typeof e.data&&!(e.data instanceof String))try{this.params.data=JSON.stringify(this.params.data)}catch(e){throw new Error("data is invalid - can't be stringified")}this.headers={contentType:"application/json;charset=UTF-8",sdkType:this.params.sdkType,sdkVersion:this.params.sdkVersion},"XDomainRequest"in t&&null!==t.XDomainRequest&&this._isIE()&&this._isIE()<10?(this.params.endpoint=this.params.endpoint.replace(/^(http|https):/,location.protocol),this.xhr=new XDomainRequest,this.oldBrowser=!0):(this.xhr=new XMLHttpRequest,this.oldBrowser=!1)}function i(e,t,n){this.error=e,this.response=t,this.status=n}function r(e){var t=this;this.retryTimeout=1e3,e=e||{},this.params=e,this.params.flushInterval=e.flushInterval?1e3*e.flushInterval:1e4,this.params.bulkLen=e.bulkLen?e.bulkLen:3,this.params.bulkSize=e.bulkSize?1024*e.bulkSize:10240,this.params.auth=e.auth?e.auth:"",this.accumulated={},this.atom=new n(e),this.timer||(this.timer=setInterval((function(){t.flush()}),this.params.flushInterval))}function a(e,t){for(var n=[],o=e.length,i=0;i<e.length;i++)!function(e,i){e((function(e,r,a){if(n[i]={err:e,data:r,status:a},0==--o)return t(n)}))}(e[i],i)}(t.IronSourceAtom=n).prototype.putEvent=function(e,t){if(!(e=e||{}).stream)return t("Stream is required",null,400);if(!e.data)return t("Data is required",null,400);e.apiVersion=this.options.apiVersion,e.sdkVersion=this.options.sdkVersion,e.sdkType=this.options.sdkType,e.auth=e.auth||this.options.auth,e.endpoint=e.endpoint||this.options.endpoint;var n=new o(e);return e.method&&"GET"===e.method.toUpperCase()?n.get(t):n.post(t)},n.prototype.putEvents=function(e,t){return(e=e||{}).stream?e.data&&e.data instanceof Array&&e.data.length?e.method&&"GET"==e.method.toUpperCase()?t("GET is not a valid method for putEvents",null,400):(e.apiVersion=this.options.apiVersion,e.auth=this.options.auth,e.sdkVersion=this.options.sdkVersion,e.sdkType=this.options.sdkType,e.endpoint=this.options.endpoint+"bulk",new o(e).post(t)):t("Data (must be not empty array) is required",null,400):t("Stream is required",null,400)},n.prototype.health=function(e){return new o(this.options).health(e)},e.exports&&(e.exports={IronSourceAtom:n,Request:o,Response:i,Tracker:r,taskMap:a}),o.prototype._isIE=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])},o.prototype.post=function(e){if(!this.params.stream||!this.params.data)return e("Stream and Data fields are required",null,400);var t=JSON.stringify({data:this.params.data,table:this.params.stream,apiVersion:this.params.apiVersion,auth:this.params.auth?b.HmacSHA256(this.params.data,this.params.auth).toString(b.enc.Hex):""});this._sendRequest(t,"POST",e)},o.prototype.get=function(e){if(!this.params.stream||!this.params.data)return e("Stream and Data fields are required",null,null);var t,n=JSON.stringify({table:this.params.stream,data:this.params.data,apiVersion:this.params.apiVersion,auth:this.params.auth?b.HmacSHA256(this.params.data,this.params.auth).toString(b.enc.Hex):""});try{t=O.encode(n)}catch(e){throw new Error("Can't encode Base64 data: "+e)}this._sendRequest(t,"GET",e)},o.prototype.health=function(e){this._sendRequest("health","GET",e)},o.prototype._sendRequest=function(e,t,n){var o,r=this.xhr,a="health"==e?this.params.endpoint+"health":this.params.endpoint+"?data="+e;this.oldBrowser?(r.open(t,this.params.endpoint),r.onload=function(){o=new i(null,r.responseText,200),n(null,o.data(),o.status)},r.onprogress=function(){},r.ontimeout=function(){o=new i("No connection to server",null,500),n(o.err(),null,o.status)},r.onerror=function(){o=new i("Service Unavailable",null,500),n(o.err(),null,o.status)},"POST"===t?(r.open("POST",this.params.endpoint),r.send(e)):(r.open("GET",a),r.send())):(r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200==r.status?(o=new i(null,r.response,r.status),n(null,o.data(),o.status)):400<=r.status&&r.status<600?(o=new i(r.response,null,r.status),n(o.err(),null,o.status)):0==r.status&&(o=new i("No connection to server",null,500),n(o.err(),null,500)))},"POST"===t?(r.open("POST",this.params.endpoint,!0),this._setRequestHeaders(),r.send(e)):(r.open("GET",a,!0),this._setRequestHeaders(),r.send()))},o.prototype._setRequestHeaders=function(){this.xhr.setRequestHeader("Content-type",this.headers.contentType),this.xhr.setRequestHeader("x-ironsource-atom-sdk-type",this.headers.sdkType),this.xhr.setRequestHeader("x-ironsource-atom-sdk-version",this.headers.sdkVersion)},i.prototype.data=function(){if(this.error)return null;try{return JSON.parse(this.response)}catch(e){return this.response}},i.prototype.err=function(){try{return JSON.parse(this.error)}catch(e){return this.error}},(t.IronSourceAtom.Tracker=r).prototype.track=function(e,t){var n,o=this;if(void 0===e||0==e.length||0==t.length||void 0===t)throw new Error("Stream name and data are required parameters");if(e in o.accumulated||(o.accumulated[e]=[]),"string"==typeof t||t instanceof String)o.accumulated[e].push(t);else try{o.accumulated[e].push(JSON.stringify(t))}catch(e){throw new Error("Invalid Data - can't be stringified",e)}(o.accumulated[e].length>=o.params.bulkLen||(n=o.accumulated[e],encodeURI(n).split(/%..|./).length-1>=o.params.bulkSize))&&o.flush(e)},r.prototype.flush=function(e,t){function n(e,t,i,r,a){return a&&(o.accumulated[e]=[],a=!1),o.atom.putEvents({stream:e,data:t},(function(o,s,u){return null!=o&&500<=u?i<12e5?void setTimeout((function(){i=2*i+Math.floor(1e3*Math.random()+100),n(e,t,i,r,a)}),i):r("Timeout - No response from server",null,408):r(o,s,u)}))}var o=this,i=this.retryTimeout;t=t||function(e,t){return e?new Error(e):t};var r=[];if(e)1<=o.accumulated[e].length&&r.push((function(t){n(e,o.accumulated[e],i,t,!0)}));else for(var s in o.accumulated)1<=o.accumulated[s].length&&function(e){r.push((function(t){return n(e,o.accumulated[e],i,t,!0)}))}(s);return a(r,t)};var s,u,d,c,p,l,m,f,h,v,g,y,w,b=b||(s=Math,d=(u={}).lib={},c=d.Base={extend:function(e){C.prototype=this;var t=new C;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},p=d.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||m).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,i=e.sigBytes;if(this.clamp(),o%4)for(var r=0;r<i;r++){var a=n[r>>>2]>>>24-r%4*8&255;t[o+r>>>2]|=a<<24-(o+r)%4*8}else for(r=0;r<i;r+=4)t[o+r>>>2]=n[r>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4){var o=function(e){e=e;var t=987654321,n=4294967295;return function(){var o=((t=36969*(65535&t)+(t>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;return o/=4294967296,(o+=.5)*(.5<s.random()?1:-1)}}(4294967296*(i||s.random())),i=987654071*o();t.push(4294967296*o()|0)}return new p.init(t,e)}}),l=u.enc={},m=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new p.init(n,t/2)}},f=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new p.init(n,t)}},h=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},v=d.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,o=t.sigBytes,i=this.blockSize,r=o/(4*i),a=(r=e?s.ceil(r):s.max((0|r)-this._minBufferSize,0))*i,u=s.min(4*a,o);if(a){for(var d=0;d<a;d+=i)this._doProcessBlock(n,d);var c=n.splice(0,a);t.sigBytes-=u}return new p.init(c,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d.Hasher=v.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),g=u.algo={},u);function C(){}!function(e){var t=b,n=t.lib,o=n.WordArray,i=n.Hasher,r=t.algo,a=[],s=[];!function(){function t(e){return 4294967296*(e-(0|e))|0}for(var n=2,o=0;o<64;)!function(t){for(var n=e.sqrt(t),o=2;o<=n;o++)if(!(t%o))return;return 1}(n)||(o<8&&(a[o]=t(e.pow(n,.5))),s[o]=t(e.pow(n,1/3)),o++),n++}();var u=[],d=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n,o,i,r,a=this._hash.words,d=a[0],c=a[1],p=a[2],l=a[3],m=a[4],f=a[5],h=a[6],v=a[7],g=0;g<64;g++){g<16?u[g]=0|e[t+g]:(o=((n=u[g-15])<<25|n>>>7)^(n<<14|n>>>18)^n>>>3,r=((i=u[g-2])<<15|i>>>17)^(i<<13|i>>>19)^i>>>10,u[g]=o+u[g-7]+r+u[g-16]);var y=d&c^d&p^c&p,w=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),b=v+((m<<26|m>>>6)^(m<<21|m>>>11)^(m<<7|m>>>25))+(m&f^~m&h)+s[g]+u[g];v=h,h=f,f=m,m=l+b|0,l=p,p=c,c=d,d=b+(w+y)|0}a[0]=a[0]+d|0,a[1]=a[1]+c|0,a[2]=a[2]+p|0,a[3]=a[3]+l|0,a[4]=a[4]+m|0,a[5]=a[5]+f|0,a[6]=a[6]+h|0,a[7]=a[7]+v|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(64+i>>>9<<4)]=e.floor(o/4294967296),n[15+(64+i>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(d),t.HmacSHA256=i._createHmacHelper(d)}(Math),y=b.lib.Base,w=b.enc.Utf8,b.algo.HMAC=y.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=w.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),r=this._iKey=t.clone(),a=i.words,s=r.words,u=0;u<n;u++)a[u]^=1549556828,s[u]^=909522486;i.sigBytes=r.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}}),t.ironSourceAtomInit=t.ironSourceAtomInit||function(){},t.ironSourceAtomInit();var O={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,o,i,r,a,s,u="",d=0;for(e=O._utf8_encode(e);d<e.length;)i=(t=e.charCodeAt(d++))>>2,r=(3&t)<<4|(n=e.charCodeAt(d++))>>4,a=(15&n)<<2|(o=e.charCodeAt(d++))>>6,s=63&o,isNaN(n)?a=s=64:isNaN(o)&&(s=64),u=u+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return u},decode:function(e){var t,n,o,i,r,a,s="",u=0;for(e=e.replace(/[^A-Za-z0-9+\/=]/g,"");u<e.length;)t=this._keyStr.indexOf(e.charAt(u++))<<2|(i=this._keyStr.indexOf(e.charAt(u++)))>>4,n=(15&i)<<4|(r=this._keyStr.indexOf(e.charAt(u++)))>>2,o=(3&r)<<6|(a=this._keyStr.indexOf(e.charAt(u++))),s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(n)),64!=a&&(s+=String.fromCharCode(o));return O._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):(127<o&&o<2048?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t,n,o="",i=0,r=0;i<e.length;)(n=e.charCodeAt(i))<128?(o+=String.fromCharCode(n),i++):191<n&&n<224?(r=e.charCodeAt(i+1),o+=String.fromCharCode((31&n)<<6|63&r),i+=2):(r=e.charCodeAt(i+1),t=e.charCodeAt(i+2),o+=String.fromCharCode((15&n)<<12|(63&r)<<6|63&t),i+=3);return o}}}(window,document)},function(e,t,n){"use strict";n.r(t);var o=n(0),i=function(e){this.mode="pa",this.title="",this.version="",this.nucleo=o.version,this.genre="",this.type="playable",this.userId="no_user_id",this.localeName="en",this.configId="1",this.allowSendEvents=!1,this.mode=e.mode,this.title=e.title,this.genre=e.genre,this.version=e.version,this.configId=e.configId,this.localeName=e.localeName},r={attempt:1,levelNumber:1,interactionCount:0,sdkTimer:0,xShow:!1};function a(e){var t=window.location.search.substring(1).split("&"),n=window.URL_PARAMS||{};return t.forEach((function(e){var t=e.split("="),o=decodeURIComponent(t[1]),i=t[0],r=!1;-1!==i.indexOf("[]")&&(i=i.replace("[]",""),r=!0),void 0===n[i]?n[i]=r?[o]:o:r&&"string"==typeof n[i]?n[i]=[n[i],o]:r?n[i].push(o):n[i]=o})),e?n[e]:n}var s=(u.prototype.on=function(e,t){return void 0===this.pool[e]&&(this.pool[e]=[]),this.pool[e].push(t),this},u.prototype.do=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return void 0!==this.pool[e]&&this.pool[e].forEach((function(e){return e.apply(void 0,t)})),this},u.prototype.list=function(){return Object.keys(this.pool)},u);function u(){this.pool={}}var d,c,p=new s,l=new s;(c=d=d||{}).portrait="portrait",c.landscape="landscape",c.none="none";var m=function(){return(m=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(){this.eventId=0}var h,v,g=new(f.prototype.init=function(e,t){var n=e.eventFunnel,o=e.eventFieldset,i=e.eventProviders,r=e.allowSendEvents;this.eventFunnel=n,this.eventFieldset=o,this.eventProviders=i,this.allowSendEvents=r,this.basePayload=t},f.prototype.updatePayload=function(e){this.mutablePayload=m(m({},this.mutablePayload),e)},f.prototype.sendEvent=function(e,t){var n;!this.allowSendEvents||(n=this.eventFunnel[e])&&this.sendCustomEvent(n.type,n.name,t)},f.prototype.sendCustomEvent=function(e,t,n){var o=this;this.allowSendEvents&&this.eventProviders.forEach((function(i){return i.send(o.buildPayload(e,t,n))}))},f.prototype.buildPayload=function(e,t,n){var o=m(m(m(m({},this.basePayload),this.mutablePayload),{eventType:e,eventName:t,eventId:++this.eventId,eventTimestamp:new Date}),n),i={};return this.eventFieldset.forEach((function(e){i[e]=o[e]})),i},f),y=(w.prototype.triggerEvent=function(e){console.debug("[NUC:PROTOCOL:DEMO] Trigger event: %s",e)},w.prototype.onReady=function(e){e()},w.prototype.onViewableChange=function(e){e()},w.prototype.onResize=function(e){var t=this;window.addEventListener("resize",(function(){return e(t.getScreenSize())}),!1)},w.prototype.onAudioVolumeChange=function(e){e()},w.prototype.isReady=function(){return!0},w.prototype.isViewable=function(){return!0},w.prototype.getScreenSize=function(){return{width:window.innerWidth,height:window.innerHeight}},w.prototype.getAdData=function(){return{opportunityId:"",requestId:"",bannerId:"",creativeId:"",campaignId:"",productType:"rv",timeData:{timeElapsed:0,duration:0},isCloseButtonVisible:!1}},w.prototype.getDeviceData=function(){return{os:navigator?navigator.platform:"",osVersion:navigator&&navigator.appVersion?navigator.appVersion.split(" ")[0]:"",deviceId:"",deviceLanguage:navigator&&(navigator.language||"").split("-")[0].toLowerCase()||"",apiLevel:""}},w.prototype.getAudioVolume=function(){return 100},w.prototype.open=function(e){this.callToActionStrategy&&this.callToActionStrategy.open(e)},w.prototype.getTimeData=function(){return this.flags.timeData},w.prototype.isCloseButtonVisible=function(){return!1},w.prototype.onCloseButtonVisibilityChange=function(e){console.debug("[NUC:PROTOCOL:DEMO] onCloseButtonVisibilityChange not implemented")},w.prototype.onTimeUpdate=function(e){var t=this,n=setInterval((function(){t.flags.timeData.timeElapsed++,e(t.flags.timeData)}),1e3);setTimeout((function(){return clearInterval(n)}),this.flags.timeData.duration)},w.prototype.adOver=function(){console.debug("[NUC:PROTOCOL:DEMO] adOver not implemented")},w.prototype.gameReady=function(){console.debug("[NUC:PROTOCOL:DEMO] gameReady not implemented")},w);function w(e){this.flags={isReady:!1,isVisible:!1,isCloseButtonVisible:!1,size:{width:800,height:600},audioVolume:100,timeData:{timeElapsed:0,duration:300}},console.debug("[NUC:PROTOCOL:DEMO] Initializing..."),this.callToActionStrategy=e.callToActionStrategy}(v=h=h||{}).ready="ready",v.viewableChange="viewableChange",v.adResized="adResized",v.audioVolumeChange="audioVolumeChange",v.timeUpdate="timeUpdate",v.closeButtonVisibilityChange="closeButtonVisibilityChange";var b=(C.prototype.triggerEvent=function(e){window.dapi.triggerEvent&&(console.debug("[NUC:PROTOCOL:DAPI] Trigger event: %s",e),window.dapi.triggerEvent(e))},C.prototype.onReady=function(e){window.dapi.addEventListener(h.ready,e)},C.prototype.onViewableChange=function(e){window.dapi.addEventListener(h.viewableChange,(function(){return e(window.dapi.isViewable())}))},C.prototype.onResize=function(e){window.dapi.addEventListener(h.adResized,e)},C.prototype.onAudioVolumeChange=function(e){window.dapi.addEventListener(h.audioVolumeChange,e)},C.prototype.onTimeUpdate=function(e){window.dapi.addEventListener(h.timeUpdate,e)},C.prototype.onCloseButtonVisibilityChange=function(e){window.dapi.addEventListener(h.closeButtonVisibilityChange,e)},C.prototype.isReady=function(){return window.dapi.isReady()},C.prototype.isViewable=function(){return!!window.dapi.isViewable&&window.dapi.isViewable()},C.prototype.getScreenSize=function(){return window.dapi.getScreenSize()},C.prototype.getAdData=function(){var e=window.dapi.getAdData()||{};return{opportunityId:e.opportunityId||"",requestId:e.requestId||"",bannerId:e.bannerId||"",creativeId:e.creativeId||"",campaignId:e.campaignId||"",productType:"interstitial"===(e.productType||"").toLowerCase()?"is":"rv",timeData:e.timeData,isCloseButtonVisible:e.isCloseButtonVisible}},C.prototype.getDeviceData=function(){var e=window.dapi.getDeviceData()||{};return{os:e.os||"",osVersion:e.osVersion||"",deviceId:e.deviceId||"",deviceLanguage:(e.deviceLanguage||"").split("-")[0].toLowerCase()||"",apiLevel:e.apiLevel||""}},C.prototype.getAudioVolume=function(){return window.dapi.getAudioVolume()},C.prototype.getTimeData=function(){return window.dapi.getTimeData()},C.prototype.isCloseButtonVisible=function(){return window.dapi.isCloseButtonVisible()},C.prototype.open=function(e){this.callToActionStrategy&&this.callToActionStrategy.open(e)},C.prototype.adOver=function(){console.debug("[NUC:PROTOCOL:DAPI] adOver callback not supported.")},C.prototype.gameReady=function(){console.debug("[NUC:PROTOCOL:DAPI] gameReady not supported.")},C);function C(e){console.debug("[NUC:PROTOCOL:DAPI] Initializing...");var t=document.createElement("script");t.async=!0,t.appendChild(document.createTextNode('function getScript(e,i){var n=document.createElement("script");n.type="text/javascript",n.async=!0,i&&(n.onload=i),n.src=e,document.head.appendChild(n)}function parseMessage(e){var i=e.data,n=i.indexOf(DOLLAR_PREFIX+RECEIVE_MSG_PREFIX);if(-1!==n){var t=i.slice(n+2);return getMessageParams(t)}return{}}function getMessageParams(e){var i,n=[],t=e.split("/"),a=t.length;if(-1===e.indexOf(RECEIVE_MSG_PREFIX)){if(a>=2&&a%2===0)for(i=0;a>i;i+=2)n[t[i]]=t.length<i+1?null:decodeURIComponent(t[i+1])}else{var o=e.split(RECEIVE_MSG_PREFIX);void 0!==o[1]&&(n=JSON&&JSON.parse(o[1]))}return n}function getDapi(e){var i=parseMessage(e);if(!i||i.name===GET_DAPI_URL_MSG_NAME){var n=i.data;getScript(n,onDapiReceived)}}function invokeDapiListeners(){for(var e in dapiEventsPool)dapiEventsPool.hasOwnProperty(e)&&dapi.addEventListener(e,dapiEventsPool[e])}function onDapiReceived(){dapi=window.dapi,window.removeEventListener("message",getDapi),invokeDapiListeners()}function init(){window.dapi.isDemoDapi&&(window.parent.postMessage(DOLLAR_PREFIX+SEND_MSG_PREFIX+JSON.stringify({state:"getDapiUrl"}),"*"),window.addEventListener("message",getDapi,!1))}var DOLLAR_PREFIX="$$",RECEIVE_MSG_PREFIX="DAPI_SERVICE:",SEND_MSG_PREFIX="DAPI_AD:",GET_DAPI_URL_MSG_NAME="connection.getDapiUrl",dapiEventsPool={},dapi=window.dapi||{isReady:function(){return!1},addEventListener:function(e,i){dapiEventsPool[e]=i},removeEventListener:function(e){delete dapiEventsPool[e]},isDemoDapi:!0};init();')),document.head.appendChild(t),this.callToActionStrategy=e.callToActionStrategy}function O(e){if("ios"===e){var t=window.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return(parseInt(t&&t[1],10)||"").toString()}var n=window.navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return(n&&n[1]&&parseInt(n[1].split(".")[0],10)||"").toString()}function S(){return/iP(hone|od|ad)/.test(window.navigator.platform)?"ios":"android"}function E(){return(window.navigator&&window.navigator.language||"").split("-")[0].toLowerCase()||""}var T=(A.prototype.getAdData=function(){return{bannerId:"",campaignId:"",creativeId:"",opportunityId:"",productType:"rv",requestId:""}},A.prototype.getAudioVolume=function(){return window.mraid.getAudioVolume?window.mraid.getAudioVolume():100},A.prototype.getDeviceData=function(){var e=S();return{os:e,osVersion:O(e),deviceId:"",deviceLanguage:E(),apiLevel:""}},A.prototype.getScreenSize=function(){return window.mraid.getMaxSize()},A.prototype.isReady=function(){return"default"===window.mraid.getState()},A.prototype.isViewable=function(){return window.mraid.isViewable()},A.prototype.onAudioVolumeChange=function(e){window.mraid.addEventListener("audioVolumeChange",e)},A.prototype.onReady=function(e){0===this.readyCallbacks.length&&(this.readyBindFunction=this.onReadyInternal.bind(this),window.mraid.addEventListener("ready",this.readyBindFunction)),this.readyCallbacks.push(e)},A.prototype.onReadyInternal=function(){window.mraid.removeEventListener("ready",this.readyBindFunction),this.readyCallbacks.forEach((function(e){e()}))},A.prototype.onResize=function(e){window.mraid.addEventListener("sizeChange",(function(t,n){var o={width:t,height:n};t&&n||(o=window.mraid.getMaxSize()),e(o)}))},A.prototype.onViewableChange=function(e){window.mraid.addEventListener("viewableChange",e)},A.prototype.open=function(e){this.callToActionStrategy&&this.callToActionStrategy.open(e)},A.prototype.triggerEvent=function(e){console.debug("[NUC:PROTOCOL:MRAID] Trigger event not supported.")},A.prototype.getTimeData=function(){return console.debug("[NUC:PROTOCOL:MRAID] getTimeData not supported."),{timeElapsed:0,duration:0}},A.prototype.isCloseButtonVisible=function(){console.debug("[NUC:PROTOCOL:MRAID] isCloseButtonVisible not supported.")},A.prototype.onCloseButtonVisibilityChange=function(e){console.debug("[NUC:PROTOCOL:MRAID] onCloseButtonVisibilityChange callback not supported.")},A.prototype.onTimeUpdate=function(e){console.debug("[NUC:PROTOCOL:MRAID] onTimeUpdate callback not supported.")},A.prototype.adOver=function(){console.debug("[NUC:PROTOCOL:MRAID] adOver callback not supported.")},A.prototype.gameReady=function(){console.debug("[NUC:PROTOCOL:MRAID] gameReady not implemented")},A);function A(e){console.debug("[NUC:PROTOCOL:MRAID] Initializing...");var t=document.createElement("script");t.src="mraid.js",document.head.appendChild(t),this.readyCallbacks=[],this.callToActionStrategy=e.callToActionStrategy}var k=(R.prototype.triggerEvent=function(e){console.debug("[NUC:PROTOCOL:TikTok] Trigger event: %s",e)},R.prototype.onReady=function(e){e()},R.prototype.onViewableChange=function(e){e()},R.prototype.onResize=function(e){var t=this;window.addEventListener("resize",(function(){return e(t.getScreenSize())}),!1)},R.prototype.onAudioVolumeChange=function(e){e()},R.prototype.isReady=function(){return!0},R.prototype.isViewable=function(){return!0},R.prototype.getScreenSize=function(){return{width:window.innerWidth,height:window.innerHeight}},R.prototype.getAdData=function(){return{opportunityId:"",requestId:"",bannerId:"",creativeId:"",campaignId:"",productType:"rv",timeData:{timeElapsed:0,duration:0},isCloseButtonVisible:!1}},R.prototype.getDeviceData=function(){var e=S();return{os:e,osVersion:O(e),deviceId:"",deviceLanguage:E(),apiLevel:""}},R.prototype.getAudioVolume=function(){return 100},R.prototype.open=function(e){console.debug("[NUC:PROTOCOL:TikTok] Opening URL: %s",e),this.callToActionStrategy&&this.callToActionStrategy.open(e)},R.prototype.getTimeData=function(){return this.flags.timeData},R.prototype.isCloseButtonVisible=function(){return!1},R.prototype.onCloseButtonVisibilityChange=function(e){console.debug("[NUC:PROTOCOL:TikTok] onCloseButtonVisibilityChange not implemented")},R.prototype.onTimeUpdate=function(e){var t=this,n=setInterval((function(){t.flags.timeData.timeElapsed++,e(t.flags.timeData)}),1e3);setTimeout((function(){return clearInterval(n)}),this.flags.timeData.duration)},R.prototype.adOver=function(){console.debug("[NUC:PROTOCOL:TikTok] adOver not implemented")},R.prototype.gameReady=function(){console.debug("[NUC:PROTOCOL:TikTok] gameReady not implemented")},R);function R(e){this.SCRIPT_URL="//sf3-ttcdn-tos.pstatp.com/obj/union-fe-nc/playable/sdk/playable-sdk.js",this.flags={isReady:!1,isVisible:!1,isCloseButtonVisible:!1,size:{width:800,height:600},audioVolume:100,timeData:{timeElapsed:0,duration:300}},console.debug("[NUC:PROTOCOL:TikTok] Initializing...");var t=document.createElement("script");t.src=this.SCRIPT_URL,document.head.appendChild(t),this.callToActionStrategy=e.callToActionStrategy}var I=(_.prototype.triggerEvent=function(e){console.debug("[NUC:PROTOCOL:MINTEGRAL] Trigger   : %s",e)},_.prototype.onReady=function(e){window.gameReady&&window.gameReady(),e()},_.prototype.onViewableChange=function(e){e()},_.prototype.onResize=function(e){var t=this;window.addEventListener("resize",(function(){return e(t.getScreenSize())}),!1)},_.prototype.onAudioVolumeChange=function(e){e()},_.prototype.isReady=function(){return!0},_.prototype.isViewable=function(){return!0},_.prototype.getScreenSize=function(){return{width:window.innerWidth,height:window.innerHeight}},_.prototype.getAdData=function(){return{opportunityId:"",requestId:"",bannerId:"",creativeId:"",campaignId:"",productType:"rv",timeData:{timeElapsed:0,duration:0},isCloseButtonVisible:!1}},_.prototype.getDeviceData=function(){var e=S();return{os:e,osVersion:O(e),deviceId:"",deviceLanguage:E(),apiLevel:""}},_.prototype.getAudioVolume=function(){return 100},_.prototype.open=function(e){this.callToActionStrategy&&this.callToActionStrategy.open(e)},_.prototype.getTimeData=function(){return this.flags.timeData},_.prototype.isCloseButtonVisible=function(){return!1},_.prototype.onCloseButtonVisibilityChange=function(e){console.debug("[NUC:PROTOCOL:MINTEGRAL] onCloseButtonVisibilityChange not implemented")},_.prototype.onTimeUpdate=function(e){var t=this,n=setInterval((function(){t.flags.timeData.timeElapsed++,e(t.flags.timeData)}),1e3);setTimeout((function(){return clearInterval(n)}),this.flags.timeData.duration)},_.prototype.adOver=function(){window.gameEnd&&window.gameEnd()},_.prototype.gameReady=function(){window.gameReady&&window.gameReady()},_);function _(e){this.flags={isReady:!1,isVisible:!1,isCloseButtonVisible:!1,size:{width:800,height:600},audioVolume:100,timeData:{timeElapsed:0,duration:300}},console.debug("[NUC:PROTOCOL:MINTEGRAL] Initializing..."),this.callToActionStrategy=e.callToActionStrategy,window.gameStart=function(){},window.gameClose=function(){}}var L=(P.prototype.open=function(e){console.debug("[NUC:PROTOCOL:FB] Opening URL: %s",e),window.FbPlayableAd.onCTAClick()},P);function P(){}var D=(V.prototype.open=function(e){console.debug("[NUC:PROTOCOL:MRAID] Opening URL: %s",e),window.mraid.open(e)},V);function V(){}var N=(G.prototype.open=function(e){e?(console.debug("[NUC:PROTOCOL:DAPI] Opening URL: %s",e),window.dapi.open(e)):(console.debug("[NUC:PROTOCOL:DAPI] Opening store"),window.dapi.openStoreUrl())},G);function G(){}var U=(F.prototype.open=function(e){e?console.debug("[NUC:PROTOCOL:DEMO] Opening URL: %s",e):console.debug("[NUC:PROTOCOL:DEMO] Opening store")},F);function F(){}var M=(j.prototype.open=function(e){window.install&&window.install(),console.debug("[NUC:PROTOCOL:MINTEGRAL] Opening store")},j);function j(){}var B=(z.prototype.open=function(e){console.debug("[NUC:PROTOCOL:TikTok] Opening URL: %s",e),window.playableSDK.openAppStore()},z);function z(){}var x={demo:y,dapi:b,mraid:T,facebook:y,tiktok:k,mintegral:I},q={demo:U,dapi:N,mraid:D,facebook:L,tiktok:B,mintegral:M};function W(){}function H(){return X.protocol}var X=new(W.prototype.init=function(e){this.protocolInstance=function(e){console.debug('[NUC:PROTOCOL] Init - "%s"',e);var t=new q[e];return console.debug('[NUC:PROTOCOL] CallToActionStrategy - "%s"',e),new x[e]({callToActionStrategy:t})}(e)},Object.defineProperty(W.prototype,"protocol",{get:function(){return this.protocolInstance},enumerable:!1,configurable:!0}),W),J="progress",$=!1,K=!1,Y=function(){return null},Z=(Q.prototype.ready=function(){Y()},Q.prototype.autoplay=function(){this.checkIsReady("autoplay()")&&(K=!0)},Q.prototype.interaction=function(){this.checkIsReady("interaction()")&&(0===r.interactionCount&&(H().triggerEvent("interaction"),this.eventService.sendEvent("tutorial",r)),r.interactionCount++)},Q.prototype.startLevel=function(){this.checkIsReady("startLevel()")&&("endLevel"===J&&r.levelNumber++,"endLevel"!==J&&"tryAgain"!==J||(J="progress",this.eventService.sendEvent("progressStartLevel",r)))},Q.prototype.endLevel=function(){this.checkIsReady("endLevel()")&&(J="endLevel",this.eventService.sendEvent("progressEndLevel",r))},Q.prototype.midwayProgress=function(){this.checkIsReady("midwayProgress()")&&this.eventService.sendEvent("progressMidway",r)},Q.prototype.endGame=function(e){var t;this.checkIsReady("endGame('"+e+"')")&&(t=this.getEndGameEvent(e),J=t.state,this.eventService.sendEvent(t.funnel,r),H().adOver())},Q.prototype.tryAgain=function(){this.checkIsReady("tryAgain()")&&(this.eventService.sendEvent("progressTryAgain",r),r.attempt++,J="tryAgain")},Q.prototype.convert=function(e){this.checkIsReady("convert("+(e||"")+")")&&(this.eventService.sendEvent(this.getConvertEventName(),r),H().open(e))},Q.prototype.getEndGameEvent=function(e){return{win:{state:"endGameWin",funnel:"adOverWin"},lose:{state:"endGameLose",funnel:"adOverLose"},timer:{state:"endGameTimer",funnel:"adOverTimer"},fake:{state:"endGameFake",funnel:"adOverFake"},fakeWin:{state:"endGameFakeWin",funnel:"adOverFakeWin"},fakeLose:{state:"endGameFakeLose",funnel:"adOverFakeLose"},fakeTimer:{state:"endGameFakeTimer",funnel:"adOverFakeTimer"},auto:{state:"endGameAuto",funnel:"adOverAuto"},autoWin:{state:"endGameAutoWin",funnel:"adOverAutoWin"},autoLose:{state:"endGameAutoLose",funnel:"adOverAutoLose"}}[e]},Q.prototype.getConvertEventName=function(){return{progress:r.interactionCount||K?"convertGame":"convertIntro",endLevel:"convertEndLevel",endGameWin:"convertEndGameWin",endGameLose:"convertEndGameLose",endGameTimer:"convertEndGameTimer",endGameFake:"convertEndGameFake",endGameFakeWin:"convertEndGameFakeWin",endGameFakeLose:"convertEndGameFakeLose",endGameFakeTimer:"convertEndGameFakeTimer",endGameAuto:"convertEndGameAuto",endGameAutoWin:"convertEndGameAutoWin",endGameAutoLose:"convertEndGameAutoLose",tryAgain:void 0}[J]},Q.prototype.checkIsReady=function(e){return!!$||(console.warn("[NUC:TRIGGER] You triggered trigger.%s before callback.onStart() was called",e),!1)},Q);function Q(e){this.eventService=e.eventService}function ee(){}var te=new(ee.prototype.onImpression=function(e){l.on("impression",e)},ee.prototype.onDeviceData=function(e){l.on("deviceData",e)},ee.prototype.onStart=function(e){l.on("start",e)},ee.prototype.onResize=function(e){l.on("resize",e)},ee.prototype.onPause=function(e){l.on("pause",e)},ee.prototype.onResume=function(e){l.on("resume",e)},ee.prototype.onMute=function(e){l.on("mute",e)},ee.prototype.onUnmute=function(e){l.on("unmute",e)},ee.prototype.onTimeUpdate=function(e){l.on("timeUpdate",e)},ee.prototype.onCloseButtonVisibilityChange=function(e){l.on("closeButtonVisibilityChange",e)},ee),ne=function(){l.do("mute")},oe=function(){l.do("unmute")},ie=n(1);function re(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),ie.all([e,t],{arrayMerge:function(e,t,n){return t}})}var ae,se=function(){this.id="",this.description="",this.data={}},ue=(de.enrichCustomConfig=function(e,t){return"string"==typeof e?t:re(t,e)},de.build=function(e,t,n){if(void 0!==t){var o,i,r,a=de.enrichCustomConfig(e,t);return n&&(a.data=(delete(r=re(o=a.data,o[i=n]))[i],r)),new de(a)}},Object.defineProperty(de.prototype,"description",{get:function(){return this._description},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),de.prototype.get=function(e,t){if(e.includes(".")){var n=e.split(".").reduce((function(e,t){return e[t]}),this._data);if(n)return n}return void 0!==this._data[e]?this._data[e]:t},de);function de(e){var t=e.id,n=e.data,o=e.description;this._id=t,this._data=n,this._description=o}function ce(){this.protocol="dapi",this.name="ironSource",this.id=1,this.allowSendEvents=!0}(ae={}).ironSource="ironSource",ae.AppLovin="AppLovin",ae.demo="demo",ae.facebook="facebook",ae.google="google",ae.unity="unity",ae.vungle="vungle",ae.mintegral="mintegral",ae.tiktok="tiktok";var pe={ironSource:ce,AppLovin:function(){this.protocol="mraid",this.name="AppLovin",this.id=4,this.allowSendEvents=!0},demo:function(){this.protocol="demo",this.name="demo",this.id=100,this.allowSendEvents=!0},facebook:function(){this.protocol="facebook",this.name="facebook",this.id=2,this.allowSendEvents=!1},google:function(){this.protocol="mraid",this.name="google",this.id=3,this.allowSendEvents=!1},unity:function(){this.protocol="mraid",this.name="unity",this.id=5,this.allowSendEvents=!0},vungle:function(){this.protocol="mraid",this.name="vungle",this.id=6,this.allowSendEvents=!0},mintegral:function(){this.protocol="mintegral",this.name="mintegral",this.id=7,this.allowSendEvents=!0},tiktok:function(){this.protocol="tiktok",this.name="tiktok",this.id=8,this.allowSendEvents=!1}},le={pa:{impression:{type:"Started",name:"Impression"},loading:{type:"Loading",name:"Loading"},gameStarted:{type:"GameStarted",name:"GameStarted"},focusExit:{type:"Focus",name:"Exit"},focusRestore:{type:"Focus",name:"Restore"},tutorial:{type:"Tutorial",name:"Tutorial"},progressMidway:{type:"Progress",name:"Midway"},progressStartLevel:{type:"Progress",name:"StartLevel"},progressEndLevel:{type:"Progress",name:"EndLevel"},progressTryAgain:{type:"Progress",name:"TryAgain"},adOverWin:{type:"AdOver",name:"Win"},adOverLose:{type:"AdOver",name:"Lose"},adOverTimer:{type:"AdOver",name:"Timer"},adOverFake:{type:"AdOver",name:"Fake"},adOverFakeWin:{type:"AdOver",name:"FakeWin"},adOverFakeLose:{type:"AdOver",name:"FakeLose"},adOverFakeTimer:{type:"AdOver",name:"FakeTimer"},adOverAuto:{type:"AdOver",name:"Auto"},adOverAutoWin:{type:"AdOver",name:"AutoWin"},adOverAutoLose:{type:"AdOver",name:"AutoLose"},convertIntro:null,convertGame:{type:"Convert",name:"Game"},convertEndLevel:{type:"Convert",name:"EndLevel"},convertEndGameWin:{type:"Convert",name:"EndGameWin"},convertEndGameLose:{type:"Convert",name:"EndGameLose"},convertEndGameTimer:{type:"Convert",name:"EndGameTimer"},convertEndGameFake:{type:"Convert",name:"EndGameFake"},convertEndGameFakeWin:{type:"Convert",name:"EndGameFakeWin"},convertEndGameFakeLose:{type:"Convert",name:"EndGameFakeLose"},convertEndGameFakeTimer:{type:"Convert",name:"EndGameFakeTimer"},convertEndGameAuto:{type:"Convert",name:"EndGameAuto"},convertEndGameAutoWin:{type:"Convert",name:"EndGameAutoWin"},convertEndGameAutoLose:{type:"Convert",name:"EndGameAutoLose"}},iec:{impression:{type:"started",name:"impression"},loading:null,gameStarted:null,focusExit:{type:"focus",name:"exit"},focusRestore:{type:"focus",name:"restore"},tutorial:{type:"interaction",name:"tutorial"},progressMidway:null,progressStartLevel:null,progressEndLevel:null,progressTryAgain:null,adOverWin:{type:"ad over",name:"ad over"},adOverLose:{type:"ad over",name:"ad over"},adOverTimer:{type:"ad over",name:"ad over"},adOverFake:{type:"ad over",name:"ad over"},adOverFakeLose:{type:"ad over",name:"ad over"},adOverFakeWin:{type:"ad over",name:"ad over"},adOverFakeTimer:{type:"ad over",name:"ad over"},adOverAuto:{type:"ad over",name:"ad over"},adOverAutoWin:{type:"ad over",name:"ad over"},adOverAutoLose:{type:"ad over",name:"ad over"},convertIntro:{type:"convert",name:"from intro"},convertGame:{type:"convert",name:"from game"},convertEndLevel:{type:"convert",name:"from game"},convertEndGameWin:{type:"convert",name:"from popup"},convertEndGameLose:{type:"convert",name:"from popup"},convertEndGameTimer:{type:"convert",name:"from popup"},convertEndGameFake:{type:"convert",name:"from fake"},convertEndGameFakeWin:{type:"convert",name:"from fake win"},convertEndGameFakeLose:{type:"convert",name:"from fake lose"},convertEndGameFakeTimer:{type:"convert",name:"from fake timer"},convertEndGameAuto:{type:"convert",name:"from auto"},convertEndGameAutoWin:{type:"convert",name:"from auto win"},convertEndGameAutoLose:{type:"convert",name:"from auto lose"}}},me=["eventId","eventType","eventName","eventTimestamp","title","version","nucleo","userId","language","bannerId","requestId","opportunityId","creativeId","channel","sessionId","orientation","xShow","sdkTimer","adNetworkId"],fe={pa:["configId","genre","levelNumber","attempt"],iec:["type"]};function he(e,t){var n={};return Object.keys(e).forEach((function(o){var i,r,a;"object"==typeof e[o]?(r=(i=e[o]).k,a=i.f,n[r]=a(t[o])):n[e[o]]=t[o]})),n}n(2);var ve=(ge.prototype.beforeSend=function(e){console.debug('[NUC:EVENT:%s] request: #%s "%s-%s" - %o',this.name,e.eventId,e.eventType,e.eventName,he(this.mapping,e))},ge.prototype.afterSend=function(e,t){console.debug('[NUC:EVENT:%s] response: #%s "%s-%s" - %i',this.name,e.eventId,e.eventType,e.eventName,t)},ge);function ge(e,t){this.mapping={},this.name=e,this.mapping=t,console.debug("[NUC:EVENT:%s] initializing...",e)}var ye,we,be={pa:"is.innovation_studio_playable",iec:"is.innovation_studio_iec"},Ce={endpoint:"https://track.atom-data.io/"},Oe={eventId:"event_id",eventType:"event_type",eventName:"event_name",eventTimestamp:{k:"event_timestamp",f:function(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,19).replace("T"," ")}},type:"type",title:"title",version:"version",nucleo:"nucleo",userId:"user_id",language:"language",bannerId:"banner_id",requestId:"request_id",opportunityId:"opportunity_id",creativeId:"creative_id",channel:"channel",configId:{k:"config",f:function(e){return isNaN(Number(e))?1:Number(e)}},configDesc:"config_desc",genre:"genre",sessionId:"session_id",levelNumber:"level_number",attempt:"attempt",orientation:"device_orientation",xShow:"x_show",sdkTimer:"sdktimer",adNetworkId:"network"},Se=((ye=function(e,t){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ye(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Ee,we=ve),Ee.prototype.send=function(e){var t=this;"iec"===this.mode&&(e.title=e.title.toLowerCase()),this.beforeSend(e),this.ironsourceAtom.putEvent({stream:this.stream,data:he(this.mapping,e)},(function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.afterSend(e,n[2])}))},Ee);function Ee(e){var t=we.call(this,"ATOM",Oe)||this;return t.ironsourceAtom=new IronSourceAtom(Ce),t.ironsourceAtom||console.error("[NUC:EVENT:ATOM] instance is undefined"),be[e]||console.error('[NUC:EVENT:ATOM] Can\'t find stream for mode "%s"',e),t.stream=be[e],t.mode=e,t}var Te=function(){return(Te=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ae=(ke.prototype.putEvent=function(e,t){var n=Te({method:"FireEvent"},e.data);window.top.postMessage(this.messagePrefix+JSON.stringify(n),"*"),t()},ke.prototype.transformData=function(e){return btoa(e)},ke);function ke(e){this.messagePrefix="<->"}var Re,Ie,_e={eventName:"event_name",result:"result",score:"score",levelNumber:"level_number",interactions:"interactions",mode:"mode",parent:"parent",durationFromGameStart:"duration_from_gamestart",attempt:"attempts_level",attemptsGame:"attempts_game",customEventName:"custom_event_name",generalMessages:"general_messages",metaData:"meta_data",creativeId:"creative_id",eventTimestamp:"event_timestamp",sessionId:"session_id",title:"title",config:"config",eventId:"event_id",geo:"geo",os:"os",osFullVersion:"os_full_version",device:"device",requestId:"request_id",channel:"channel",extChannel:"ext_channel",configDescription:"config_description",nucleo:"nucleo",type:"creative_type",eventType:"event_type",orientation:"device_orientation",version:"version",language:"language"},Le=(Re=function(e,t){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Re(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Pe={};function De(e){var t=Ie.call(this,"PLAYLOGS",_e)||this;return t.provider=new Ae(Pe),t.provider||console.error("[NUC:EVENT:PLAYLOGS] instance is undefined"),t}var Ve={atom:Se,playlogs:(Le(De,Ie=ve),De.prototype.send=function(e){var t=this;this.beforeSend(e),this.provider.putEvent({data:he(this.mapping,e)},(function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.afterSend(e,n[2])}))},De)},Ne=function(e,t){var n;this.eventFunnel=(n=e.mode,le[n]),this.eventFieldset=function(e){if(fe[e])return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o}(fe[e],me);console.debug("[NUC:FIELDSET:FACTORY] unsupported mode: "+e+".")}(e.mode),this.eventProviders=t.map((function(t){return n=e.mode,new Ve[t](n);var n})),this.allowSendEvents=e.allowSendEvents},Ge=function(){return(Ge=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ue=["atom"];function Fe(){var e=this;this.currentState={width:0,height:0,visible:!1},this.timestamp={nucleoStarted:Date.now(),protocolReady:0,firstVisible:0,gameReadyToStart:0,gameStarted:0},console.info("[NUC:CORE] Nucleo started! Version: %s",o.version),function(e){Y=e}((function(){return e.playableReady()}))}var Me=new(Object.defineProperty(Fe.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Fe.prototype.init=function(e){var t,n=this,o=(t=e.network,new(pe[t]||ce)),r=new i(e);r.allowSendEvents=o.allowSendEvents,r.adNetworkId=o.id,X.init(o.protocol),this.initializeEventService(r),H().isReady()?(console.debug("[NUC:CORE] Protocol already loaded"),this.onProtocolReady(e)):(console.debug("[NUC:CORE] Waiting for protocol"),H().onReady((function(){return n.onProtocolReady(e)}))),console.debug("[NUC:CORE] Initialized: %o",r)},Fe.prototype.initializeEventService=function(e){a("inadLog")&&Ue.push("playlogs");var t=function(e){return{title:e.title,version:(t=e.version,n=t.split("."),parseInt(n[0]+(1<n[1].length?n[1]:"0"+n[1]),10)),nucleo:e.nucleo,userId:e.userId,type:e.type,language:e.localeName,genre:e.genre,sessionId:Math.floor(Date.now().valueOf()+3e14*Math.random()),adNetworkId:e.adNetworkId};var t,n}(e),n=new Ne(e,Ue);g.init(n,t)},Fe.prototype.createConfig=function(e,t){return ue.build(e.customGameConfig,function(e){if(e&&e.fields){for(var t=new se,n=0,o=e.fields;n<o.length;n++){var i=o[n];t.data[i.key]=i.defaultValue}return t}}(e.gameConfig),t)},Fe.prototype.tryStart=function(){H().isViewable()&&this.timestamp.gameReadyToStart&&!this.timestamp.gameStarted&&($=!0,H().gameReady(),this.timestamp.gameStarted=Date.now(),console.debug("[NUC:CORE] Start:\nProtocol ready: %sms\nFirst visible: %sms\nGame ready: %sms\nGame started: %sms",this.timestamp.protocolReady-this.timestamp.nucleoStarted,this.timestamp.firstVisible-this.timestamp.nucleoStarted,this.timestamp.gameReadyToStart-this.timestamp.nucleoStarted,this.timestamp.gameStarted-this.timestamp.nucleoStarted),function(){var e=H().getScreenSize(),t=e.width,n=e.height,o=0===H().getAudioVolume();l.do("start",t,n,o)}(),this.timestamp.gameReadyToStart>this.timestamp.firstVisible&&g.sendEvent("loading",Ge(Ge({},r),{eventTimestamp:new Date(this.timestamp.gameReadyToStart)})),g.sendEvent("gameStarted",r))},Fe.prototype.fetchAdData=function(){var e=H().getAdData();return{bannerId:e.bannerId,requestId:e.requestId,opportunityId:e.opportunityId,creativeId:e.creativeId,channel:e.productType.toLowerCase()}},Fe.prototype.onProtocolReady=function(e){console.debug("[NUC:CORE] Protocol ready"),this.handleAdData(e),this.handleDeviceData(),this.subscribeForProtocolEvents(),this.timestamp.protocolReady=Date.now(),H().isViewable()&&this.firstVisible(),this.tryStart()},Fe.prototype.handleAdData=function(e){var t=this.fetchAdData();this.updateEventPayload(t),this._config=this.createConfig(e,t.channel),this.updateEventPayload({configId:this._config?this._config.id:e.configId,configDesc:this._config?this._config.description:""})},Fe.prototype.handleDeviceData=function(){var e=H().getDeviceData();this.updateEventPayload({language:e.deviceLanguage}),l.do("deviceData",H().getDeviceData())},Fe.prototype.updateEventPayload=function(e){g.updatePayload(e)},Fe.prototype.subscribeForProtocolEvents=function(){var e=this;H().onAudioVolumeChange((function(t){return e.onAudioVolumeChange(t)})),H().onViewableChange((function(t){return e.onViewableChange(t)})),H().onResize((function(t){var n=t.width,o=t.height;return e.onResize(n,o)})),H().onCloseButtonVisibilityChange((function(t){return e.onCloseButtonVisibilityChange(t)})),H().onTimeUpdate((function(t){return e.onTimeUpdate(t)}))},Fe.prototype.onAudioVolumeChange=function(e){(0<e?oe:ne)()},Fe.prototype.onViewableChange=function(e){e&&!this.timestamp.gameStarted?(this.firstVisible(),this.tryStart()):e&&this.timestamp.gameStarted&&!this.currentState.visible?this.resume():!e&&this.timestamp.gameStarted&&this.currentState.visible&&this.pause(),this.currentState.visible=e},Fe.prototype.onTimeUpdate=function(e){r.sdkTimer=e&&e.timeElapsed,function(e){l.do("timeUpdate",e)}(e)},Fe.prototype.onCloseButtonVisibilityChange=function(e){r.xShow=e,function(e){l.do("closeButtonVisibilityChange",e)}(e)},Fe.prototype.onResize=function(e,t){e===this.currentState.width&&t===this.currentState.height||(this.currentState.width=e,this.currentState.height=t,g.updatePayload({orientation:e<t?d.portrait:d.landscape}),console.debug("[NUC:CORE] Resize: %ix%i",e,t),function(){var e=H().getScreenSize(),t=e.width,n=e.height;l.do("resize",t,n)}())},Fe.prototype.firstVisible=function(){this.timestamp.firstVisible||(console.debug("[NUC:CORE] First visible"),this.currentState.visible=!0,this.timestamp.firstVisible=Date.now(),function(){var e=H().getScreenSize(),t=e.width,n=e.height,o=0===H().getAudioVolume();l.do("impression",t,n,o)}(),g.sendEvent("impression",Ge(Ge({},r),{eventTimestamp:new Date(this.timestamp.firstVisible)})))},Fe.prototype.pause=function(){console.debug("[NUC:CORE] Pause"),g.sendEvent("focusExit",r),l.do("pause")},Fe.prototype.resume=function(){console.debug("[NUC:CORE] Resume"),g.sendEvent("focusRestore",r),l.do("resume")},Fe.prototype.playableReady=function(){console.debug("[NUC:CORE] Game ready"),this.timestamp.gameReadyToStart=Date.now(),this.tryStart()},Fe),je=function(){return(je=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Be=(ze.prototype.init=function(e,t,n,o,i){void 0===i&&(i={});var r=i.gameConfig,s=i.network;this._trigger=new Z({eventService:g}),this._metaConfig=r,this._version=o,Me.init({mode:e,title:t,genre:n,version:o,gameConfig:r,customGameConfig:"$_BAKEME_$",network:(a().demo?"demo":a().network)||s,configId:(a("config")||window.DEFAULT_CONFIG||"1").replace("config",""),localeName:a("lang")||"en"})},Object.defineProperty(ze.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"metaConfig",{get:function(){return this._metaConfig},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"config",{get:function(){return Me.config},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"callback",{get:function(){return te},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"utils",{get:function(){return{getUrlParams:a,eventPool:p}},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"status",{get:function(){return je({},r)},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"protocol",{get:function(){return{isViewable:function(){return H().isViewable()},getScreenSize:function(){return H().getScreenSize()},getAdData:function(){return H().getAdData()},getDeviceData:function(){return H().getDeviceData()},getAudioVolume:function(){return H().getAudioVolume()},isCloseButtonVisible:function(){return H().isCloseButtonVisible()},getTimeData:function(){return H().getTimeData()},triggerEvent:function(e){return H().triggerEvent(e)},open:function(e){return H().open(e)}}},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,"event",{get:function(){return{send:function(e,t,n){var o=je(je({},n),r);g.sendCustomEvent(e,t,o)},updatePayload:function(e){g.updatePayload(e)}}},enumerable:!1,configurable:!0}),ze);function ze(){}window.NUC=new Be}]);